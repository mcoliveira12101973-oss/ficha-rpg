<!DOCTYPE html> 
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Ficha de RPG</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
  background:#0e0e0e;
  color:#eee;
  font-family: Arial, sans-serif;
  padding:20px;
}
.ficha {
  max-width:1100px;
  margin:auto;
  background:#1a1a1a;
  padding:20px;
  border-radius:12px;
}
h1,h2 { text-align:center; }
.topo {
  display:flex;
  gap:20px;
  flex-wrap:wrap;
}
.topo img {
  width:180px;
  height:240px;
  object-fit:cover;
  border-radius:10px;
  border:2px solid #333;
}
.info span, td[contenteditable] {
  background:#222;
  padding:4px 6px;
  border-radius:4px;
}
table {
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th,td {
  border:1px solid #333;
  padding:8px;
}
th { background:#222; }
.barra {
  width:100%;
  height:18px;
  background:#333;
  border-radius:10px;
  overflow:hidden;
}
.barra div {
  height:100%;
  transition:width 0.4s;
}
.hp { background:#c0392b; }
.mp { background:#2980b9; }
button {
  background:#333;
  color:white;
  border:none;
  padding:5px 8px;
  margin:2px;
  border-radius:5px;
}
button:hover { background:#555; }
.secao { margin-top:30px; }
select {
  background:#222;
  color:#fff;
  border:1px solid #333;
  padding:5px;
}
</style>
</head>

<body>
<div class="ficha">
<h1>üßô Ficha de RPG</h1>
<!-- AQUI: BOT√ÉO DE SALVAR --> <button onclick="salvarFicha()">üíæ Salvar ficha</button> 

<div class="topo">
<img src="https://via.placeholder.com/180x240">
<div class="info">
<p><b>Nome:</b> <span contenteditable id="nome">Her√≥i</span></p>
<p><b>N√≠vel:</b> <span contenteditable id="nivel">1</span></p> 
<p><b>Ra√ßa:</b> <span contenteditable id="raca">Humano</span></p>
<p><b>Classe:</b> <span contenteditable id="classe">Guardi√£o</span></p>

<p><b>Elemento:</b>
<select id="elemento">
<option>Fogo</option><option>√Ågua</option><option>Terra</option><option>Ar</option>
<option>Raio</option><option>Gelo</option>
<option>Natureza</option><option>Madeira</option><option>Planta</option>
<option>Veneno</option><option>Areia</option><option>Lama</option><option>Pedra</option>
<option>Sombras</option><option>Trevas</option><option>Maldi√ß√£o</option>
<option>Corrup√ß√£o</option><option>Vazio</option><option>Medo</option>
<option>Luz</option><option>Sagrado</option><option>Celestial</option>
<option>Astral</option><option>Estelar</option><option>Ordem</option>
<option>Caos</option><option>Infernal</option><option>Sangue</option>
<option>Sacrif√≠cio</option><option>Pecado</option>
<option>Mente</option><option>Ps√≠quico</option><option>Sonho</option>
<option>Ilus√£o</option><option>Emo√ß√£o</option>
<option>Metal</option><option>Ferro</option><option>Ossos</option>
<option>Cristal</option><option>Vidro</option>
<option>Tempo</option><option>Espa√ßo</option><option>Gravidade</option>
<option>Destino</option><option>Acaso</option>
<option>Energia</option><option>√âter</option><option>Abismo</option>
<option>Cinzas</option><option>N√©voa</option>
</select>
</p>

</select>
</p>

<!-- AQUI: CONTROLES DE IMAGEM -->
<div style="margin-top:10px">
  <button onclick="definirImagem()">Adicionar imagem (link)</button>
  <button onclick="removerImagem()">Remover imagem</button>
</div>
  
<p><b>Rela√ß√£o Elemental:</b>
<span id="infoElemento" style="color:#ffd700;">‚Äî</span>
</p>

</div>
</div>

<div class="secao">
<h2>Status de Combate</h2>
<table>
<tr><th>Item</th><th>Atual</th><th>M√°x</th><th>A√ß√µes</th></tr>
<tr>
<td>PV / Vida</td>
<td contenteditable id="hpAtual">40</td>
<td contenteditable id="hpMax">50</td>
<td>
<button onclick="alterarHP(-5)">-5</button>
<button onclick="alterarHP(5)">+5</button>
</td>
</tr>
<tr><td colspan="4"><div class="barra"><div id="hpBar" class="hp"></div></div></td></tr>
<tr>
<td>PM / Mana</td>
<td contenteditable id="mpAtual">20</td>
<td contenteditable id="mpMax">30</td>
<td>
<button onclick="alterarMP(-5)">-5</button>
<button onclick="alterarMP(5)">+5</button>
</td>
</tr>
<tr><td colspan="4"><div class="barra"><div id="mpBar" class="mp"></div></div></td></tr>
</table>
</div>

<div class="secao">
<h2>Atributos</h2>
<table>
<tr><th>Atributo</th><th>Valor</th><th>Mod</th></tr>
<tr><td>For√ßa</td><td contenteditable class="atrib" id="forca">12</td><td>+</td></tr>
<tr><td>Destreza</td><td contenteditable class="atrib" id="destreza">14</td><td>+</td></tr>
<tr><td>Constitui√ß√£o</td><td contenteditable class="atrib" id="constituicao">13</td><td>+</td></tr>
<tr><td>Intelig√™ncia</td><td contenteditable class="atrib" id="inteligencia">10</td><td>+</td></tr>
<tr><td>Sabedoria</td><td contenteditable class="atrib" id="sabedoria">11</td><td>+</td></tr>
<tr><td>Carisma</td><td contenteditable class="atrib" id="carisma">9</td><td>+</td></tr>
<tr><th colspan="3">Atributos de Combate</th></tr>
<tr><td>Defesa / CA</td><td contenteditable class="atrib" id="defesa">15</td><td>+</td></tr>
<tr><td>Iniciativa</td><td contenteditable class="atrib" id="iniciativa">3</td><td>+</td></tr>
<tr><td>Deslocamento</td><td contenteditable class="atrib" id="deslocamento">9</td><td>m</td></tr>
<tr><td>Mestria de Elemento</td><td contenteditable class="atrib" id="mestria">2</td><td>+</td></tr>
</table>

<canvas id="grafico"></canvas> 
</div>
</div>

<script>
// ===== VIDA / MANA =====
function atualizarBarras(){
  hpBar.style.width = (hpAtual.innerText / hpMax.innerText) * 100 + "%";
  mpBar.style.width = (mpAtual.innerText / mpMax.innerText) * 100 + "%";
}
function alterarHP(v){ hpAtual.innerText = Math.max(0, +hpAtual.innerText + v); atualizarBarras(); }
function alterarMP(v){ mpAtual.innerText = Math.max(0, +mpAtual.innerText + v); atualizarBarras(); }

// ===== GR√ÅFICO =====
const grafico = new Chart(document.getElementById("grafico"), {
  type:"radar",
  data:{
    labels:["For√ßa","Destreza","Constitui√ß√£o","Intelig√™ncia","Sabedoria","Carisma"],
    datasets:[{
      data:[12,14,13,10,11,9],
      backgroundColor:"rgba(0,200,255,0.2)",
      borderColor:"rgba(0,200,255,1)"
    }]
  },
  options:{ scales:{ r:{ beginAtZero:true, max:20 } } }
});

// ===== SISTEMA ELEMENTAL =====
<label for="elemento">Elemento:</label>
<select id="elemento" onchange="salvarElemento()">
  <!-- op√ß√µes dos elementos -->
</select>
<div id="infoElement"></div>


// ===== LINHA ADICIONADA (GR√ÅFICO AUTOM√ÅTICO) =====
document.querySelectorAll(".atrib").forEach(a=>a.addEventListener("input",()=>{grafico.data.datasets[0].data=[...document.querySelectorAll(".atrib")].slice(0,6).map(x=>+x.innerText);grafico.update();})); 

// ===== SISTEMA DE IMAGEM =====
const imgPersonagem=document.querySelector(".topo img");

function definirImagem(){
  const link=prompt("Cole o link da imagem:");
  if(link) imgPersonagem.src=link;
}

function removerImagem(){
  imgPersonagem.src="https://via.placeholder.com/180x240";
}
const repoName = window.location.pathname.split('/')[1];

// ===== SALVAR TODA A FICHA =====
function salvarFicha(){
  // salva imagem
  localStorage.setItem(`imagem-${repNome}`, ...);

  // salva todos os campos edit√°veis
  document.querySelectorAll("[contenteditable]").forEach(el=>{
    if(el.id){ // usa o id se existir
     localStorage.setItem(`${el.id}-${repNome}`, ...);
    }
  });

  // salva elemento selecionado
  localStorage.setItem(`elemento-${repNome}`, ...);

  alert("Ficha salva com sucesso!");
}

// ===== CARREGAR TODA A FICHA =====
function carregarFicha(){
  // carrega imagem
  const img = localStorage.getItem(`imagem-${repNome}`);
  if(img) document.querySelector(".topo img").src = img;

  // carrega campos edit√°veis
  document.querySelectorAll("[contenteditable]").forEach(el=>{
    if(el.id){
      const salvo = localStorage.getItem(`${el.id}-${repNome}`);
      if(salvo) el.innerText = salvo;
    }
  });

  // carrega elemento selecionado
  const el = localStorage.getItem(`elemento-${repNome}`);
  if(el) document.getElementById("elemento").value = el;

  // atualiza rela√ß√£o elemental
  atualizarInfoElemental();

  // atualiza barras de HP/MP com os valores carregados
  atualizarBarras();
}
function carregarAtributos(){
  const ids = ["forca", "destreza", "constituicao", "inteligencia", "sabedoria", "carisma"];
  const valores = [];

  ids.forEach(id => {
    const salvo = localStorage.getItem(id);
    if(salvo) document.getElementById(id).innerText = salvo;
    valores.push(+document.getElementById(id).innerText);
  });

  grafico.data.datasets[0].data = valores;
  grafico.update();
}
window.onload = carregarAtributos;

// chama carregar ao abrir
carregarFicha();

<script>
// Pega o nome do reposit√≥rio a partir da URL
const repNome = window.location.pathname.split("/")[1];

// ------ REMOVER IMAGEM ------
function removerImagem() {
  document.querySelector(".topo img").src = "https://via.placeholder.com/180x240";
}

// ------ SALVAR TODA A FICHA ------
function salvarFicha() {
  // Salva imagem
  localStorage.setItem(`imagem-${repNome}`, document.querySelector(".topo img").src);

  // Salva todos os campos edit√°veis
  document.querySelectorAll(".contenteditabletable").forEach(el => {
    if (el.id) {
      localStorage.setItem(`${el.id}-${repNome}`, el.innerText);
    }
  });

  // Salva elemento selecionado (se tiver)
  const elemento = document.getElementById("elemento");
  if (elemento) {
    localStorage.setItem(`elemento-${repNome}`, elemento.value);
  }

  alert(`Ficha salva com sucesso em ${repNome}!`);
}

// ------ CARREGAR TODA A FICHA ------
function carregarFicha() {
  // Carrega imagem
  const img = localStorage.getItem(`imagem-${repNome}`);
  if (img) {
    document.querySelector(".topo img").src = img;
  }

  // Carrega campos edit√°veis
  document.querySelectorAll(".contenteditabletable").forEach(el => {
    if (el.id) {
      const valor = localStorage.getItem(`${el.id}-${repNome}`);
      if (valor !== null) {
        el.innerText = valor;
      }
    }
  });

  // Carrega elemento selecionado (se tiver)
  const elemento = document.getElementById("elemento");
  if (elemento) {
    const valorElemento = localStorage.getItem(`elemento-${repNome}`);
    if (valorElemento !== null) {
      elemento.value = valorElemento;
    }
  }

  alert(`Ficha carregada de ${repNome}!`);
}
<script>
  const repNome = window.location.pathname.split("/")[1];

  const tabelaElemental = {
  Fogo:{fraco:"√Ågua",forte:"Planta"},
  √Ågua:{fraco:"Raio",forte:"Fogo"},
  Terra:{fraco:"√Ågua",forte:"Raio"},
  Ar:{fraco:"Terra",forte:"Fogo"},
  Raio:{fraco:"Terra",forte:"√Ågua"},
  Gelo:{fraco:"Fogo",forte:"Ar"},
  Natureza:{fraco:"Fogo",forte:"Terra"},
  Madeira:{fraco:"Fogo",forte:"√Ågua"},
  Planta:{fraco:"Fogo",forte:"√Ågua"},
  Veneno:{fraco:"Luz",forte:"Planta"},
  Areia:{fraco:"√Ågua",forte:"Fogo"},
  Lama:{fraco:"Raio",forte:"Terra"},
  Pedra:{fraco:"Raio",forte:"Gelo"},
  Sombras:{fraco:"Luz",forte:"Medo"},
  Trevas:{fraco:"Luz",forte:"Ps√≠quico"},
  Maldi√ß√£o:{fraco:"Sagrado",forte:"Emo√ß√£o"},
  Corrup√ß√£o:{fraco:"Ordem",forte:"Caos"},
  Vazio:{fraco:"Energia",forte:"Abismo"},
  Medo:{fraco:"Luz",forte:"Sonho"},
  Luz:{fraco:"Trevas",forte:"Maldi√ß√£o"},
  Sagrado:{fraco:"Profano",forte:"Trevas"},
  Celestial:{fraco:"Caos",forte:"Infernal"},
  Astral:{fraco:"Espa√ßo",forte:"Estelar"},
  Estelar:{fraco:"Abismo",forte:"Astral"},
  Ordem:{fraco:"Caos",forte:"Destino"},
  Caos:{fraco:"Ordem",forte:"Infernal"},
  Infernal:{fraco:"Sagrado",forte:"Sangue"},
  Sangue:{fraco:"Veneno",forte:"Sacrif√≠cio"},
  Sacrif√≠cio:{fraco:"Pecado",forte:"Sagrado"},
  Pecado:{fraco:"Ordem",forte:"Emo√ß√£o"},
  Mente:{fraco:"Emo√ß√£o",forte:"Ps√≠quico"},
  Ps√≠quico:{fraco:"Trevas",forte:"Sonho"},
  Sonho:{fraco:"Ordem",forte:"Ilus√£o"},
  Ilus√£o:{fraco:"Luz",forte:"Emo√ß√£o"},
  Emo√ß√£o:{fraco:"Mente",forte:"Pecado"},
  Metal:{fraco:"Raio",forte:"Veneno"},
  Ferro:{fraco:"Fogo",forte:"Ossos"},
  Ossos:{fraco:"Metal",forte:"Veneno"},
  Cristal:{fraco:"Sombras",forte:"Luz"},
  Vidro:{fraco:"Pedra",forte:"Gelo"},
  Tempo:{fraco:"Caos",forte:"Destino"},
  Espa√ßo:{fraco:"Gravidade",forte:"Astral"},
  Gravidade:{fraco:"Espa√ßo",forte:"Ar"},
  Destino:{fraco:"Acaso",forte:"Tempo"},
  Acaso:{fraco:"Ordem",forte:"Destino"},
  Energia:{fraco:"Abismo",forte:"√âter"},
  √âter:{fraco:"Vazio",forte:"Energia"},
  Abismo:{fraco:"Luz",forte:"Vazio"},
  Cinzas:{fraco:"√Ågua",forte:"Fogo"},
  N√©voa:{fraco:"Ar",forte:"Sombras"}
  };

  function salvarElemento() {
    const elemento = document.getElementById("elemento").value;
    localStorage.setItem(`elemento-${repNome}`, elemento);
    atualizarInfoElemento();
  }

  function atualizarInfoElemento() {
    const elementoSelecionado = localStorage.getItem(`elemento-${repNome}`);
    const infoElement = document.getElementById("infoElement");

    if (elementoSelecionado && tabelaElemental[elementoSelecionado]) {
      const info = tabelaElemental[elementoSelecionado];
      infoElement.innerText = `Fraqueza: ${info.fraco} | Vantagem: ${info.forte}`;
    } else {
      infoElement.innerText = "Sem dados";
    }
  }

  function carregarFicha() {
    // ... seu c√≥digo de carregar imagem e atributos ...

    const elemento = localStorage.getItem(`elemento-${repNome}`);
    if (elemento) {
      document.getElementById("elemento").value = elemento;
    }

    atualizarInfoElemento();
  }
</script>

</body>
</html>
